{% extends 'base.html.twig' %}

{% block title %}Page de recherche{% endblock %}


{% block body %}
    <h1 class="text-center my-3 fw-bold">Résultats de la recherche</h1>
    {# results in data : On parcourt le tableau des films (data) et pour chaque film, on affiche le titre (title) à condition qu'il s'agisse d'un film et pas d'une série. (Les films ont des title, les séries ont des name). #}

    {# Dans le cas où on utilise la requête multi (qui retourne des personnes) au lieu de movie (qui ne retourne que des films), on différencie les résultats entre les personnes et les films :
    <section>
        <h2 class="fw-bold">Personnes</h2>
        {% for results in data %}
            {% if results.media_type == "person" %}
                <h3>{{results.name}}</h3>
                {% if results.profile_path is not empty %}
                    <img src="{{ imageUrl ~ 'w92' ~ results.profile_path }}" alt="{{ results.name }} Poster">
                    {% else %}
                    <img src="{{asset('images/no_image_available_w92_h138.png')}}" alt="">
                {% endif %}
                <p>{{results.known_for_department}}</p>
            {% endif %}
        {% endfor %}
    </section> #}

    <section>
        {# <h2>Films</h2> #}
        {% for results in data %}
            {# {% if results.media_type == "movie" %} #}
                <h3>{{results.title}}</h3>
                {# Si une photo est disponible pour une personne donnée, on l'affiche... #}
                {% if results.poster_path is not empty %}
                {# Pour récupérer une image, on concatène la variable qui correspond à l'url de base pour les requêtes sur les images, avec la taille de l'image choisie, et le KV correspondant à l'image. #}
                    <img src="{{ imageUrl ~ 'w92' ~ results.poster_path }}" alt="{{ results.title }} Poster">
                {# ... sinon on affiche une image générique #}
                {% else %}
                    <img src="{{asset('images/no_image_available_w92_h138.png')}}" alt="">
                {% endif %}
                {% if results.overview is not empty %}
                    <p>{{results.overview}}</p>
                {% else %}
                    <p class="font-italic">Pas de synopsis disponible</p>
                {% endif %}
            {# {% endif %}
            {% if results.media_type == "person" %}
                {% for knownFor in results.known_for %}
                    <h3>{{knownFor.title}}</h3>
                    <img src="{{ imageUrl ~ 'w92' ~ knownFor.poster_path }}" alt="{{ knownFor.title }} Poster">
                    <p>{{knownFor.overview}}</p>
                {% endfor %}            
            {% endif %} #}
        {% endfor %}
    </section>
{% endblock %}
